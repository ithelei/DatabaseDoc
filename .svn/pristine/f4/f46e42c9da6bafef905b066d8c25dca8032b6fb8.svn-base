package com.dbdoc;

import java.io.File;
import java.util.ArrayList;
import java.util.List;

import org.apache.log4j.Logger;

public class FileUtils {
	private static Logger logger = Logger.getLogger(FileUtils.class);

	/**
	 * @param path
	 *            æ–‡ä»¶è·¯å¾„
	 * @param suffix
	 *            åç¼€å? ä¸ºç©ºåˆ™è¡¨ç¤ºæ‰€æœ‰æ–‡ä»?
	 * @param isdepth
	 *            æ˜¯å¦éå†å­ç›®å½?
	 * @return list
	 */
	public static List<File> getListFiles(String path, String suffix, boolean isdepth) {
		List<File> lstFileNames = new ArrayList<File>();
		File file = new File(path);
		return listFile(lstFileNames, file, suffix, isdepth);
	}

	private static List<File> listFile(List<File> lstFileNames, File f, String suffix, boolean isdepth) {
		// è‹¥æ˜¯ç›®å½•, é‡‡ç”¨é€’å½’çš„æ–¹æ³•éå†å­ç›®å½•
		if (f.isDirectory()) {
			File[] t = f.listFiles();

			for (int i = 0; i < t.length; i++) {
				// System.out.println("dd=="+t[i].getName().substring(0, t[i].getName().lastIndexOf(".")));
				listFile(lstFileNames, t[i], suffix, isdepth);
			}
		} else {
			String filePath = f.getAbsolutePath();
			if (!suffix.equals("")) {
				int begIndex = filePath.lastIndexOf("."); // æœ?ä¸?¸ª.(å³åç¼?å‰é¢çš?)çš„ç´¢å¼?
				String tempsuffix = "";

				if (begIndex != -1) {
					tempsuffix = filePath.substring(begIndex + 1, filePath.length());
					if (tempsuffix.equals(suffix)) {
						lstFileNames.add(f);
					}
				}
			} else {
				lstFileNames.add(f);
			}
		}
		return lstFileNames;
	}

}